<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mídia - I.E.P.C</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header>
        <div class="container">
            <a href="index.html" class="logo">I.E.P.C</a>
            <nav>
                <ul>
                    <li><a href="midia.html">Mídia</a></li>
                    <li><a href="index.html">Início</a></li>
                    <li><a href="sobre.html">Sobre Nós</a></li>
                    <li><a href="cultos.html">Cultos</a></li>
                    <li><a href="biblia.html">Bíblia</a></li>
                </ul>
            </nav>
            <button id="dark-toggle"><i class="fas fa-moon"></i></button>
        </div>
    </header>

    <section class="section">
        <div class="container">
            <h2>Mídia</h2>
            <div class="tabs">
                <button class="tab-btn active" data-tab="live">Ao Vivo</button>
                <button class="tab-btn" data-tab="fotos">Fotos</button>
                <button class="tab-btn" data-tab="videos">Vídeos</button>
            </div>
            <div id="live" class="tab-content active">
                <iframe width="100%" height="500" src="" frameborder="0" allowfullscreen id="live-frame"></iframe>
                <p id="no-live">Nenhuma transmissão ao vivo no momento.</p>
            </div>
            <div id="fotos" class="tab-content">
                <div class="gallery-grid" id="gallery"></div>
            </div>
            <div id="videos" class="tab-content">
                <div class="video-grid" id="video-list"></div>
            </div>
            <button id="adm-btn">Área ADM</button>
        </div>
    </section>

    <div id="adm-panel" class="adm-panel">
        <h3>Área Administrativa</h3>
        <button id="adm-close" style="position:absolute; top:10px; right:10px; background:none; border:none; color:white; font-size:2rem; cursor:pointer;">×</button>
        <input type="password" id="adm-password" placeholder="Senha">
        <button id="adm-login">Entrar</button>
        <div id="adm-content" style="display:none;">
            <h4>Live YouTube</h4>
            <input type="text" id="live-link" placeholder="Link embed (ex: https://www.youtube.com/embed/ID)">
            <button id="save-live">Salvar Live</button>
            
            <h4>Adicionar Foto</h4>
            <input type="text" id="foto-url" placeholder="URL da imagem">
            <button id="add-foto">Adicionar Foto</button>
            
            <h4>Adicionar Vídeo</h4>
            <input type="text" id="video-url" placeholder="Link embed YouTube">
            <input type="text" id="video-title" placeholder="Título do vídeo">
            <button id="add-video">Adicionar Vídeo</button>
            
            <h4>Remover</h4>
            <button id="remove-all" style="background:#c2185b; color:white;">Limpar Tudo</button>
        </div>
    </div>

    <a href="index.html" class="back-home"><i class="fas fa-home"></i></a>
    <button id="topo"><i class="fas fa-arrow-up"></i></button>

    <script src="script.js"></script>
    <script>
        // Abas da Mídia
        const tabBtns = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');

        tabBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                tabBtns.forEach(b => b.classList.remove('active'));
                tabContents.forEach(c => c.classList.remove('active'));
                btn.classList.add('active');
                document.getElementById(btn.dataset.tab).classList.add('active');
            });
        });

        // Área ADM
        const admBtn = document.getElementById('adm-btn');
        const admPanel = document.getElementById('adm-panel');
        const admClose = document.getElementById('adm-close');
        const admPassword = document.getElementById('adm-password');
        const admLogin = document.getElementById('adm-login');
        const admContent = document.getElementById('adm-content');

        admBtn.addEventListener('click', () => {
            admPanel.style.display = 'block';
        });

        admClose.addEventListener('click', () => {
            admPanel.style.display = 'none';
        });

        admLogin.addEventListener('click', () => {
            if (admPassword.value === 'IEPC') {
                admContent.style.display = 'block';
                admPassword.value = '';
            } else {
                alert('Senha incorreta!');
            }
        });

        // Carrega mídia salva (localStorage)
        function loadMedia() {
            // Live
            const liveLink = localStorage.getItem('live-link') || '';
            if (liveLink) {
                document.getElementById('live-frame').src = liveLink;
                document.getElementById('no-live').style.display = 'none';
            } else {
                document.getElementById('live-frame').src = '';
                document.getElementById('no-live').style.display = 'block';
            }

            // Fotos
            const gallery = document.getElementById('gallery');
            gallery.innerHTML = '';
            const fotos = JSON.parse(localStorage.getItem('fotos') || '[]');
            fotos.forEach(url => {
                const img = document.createElement('img');
                img.src = url;
                img.alt = 'Foto da igreja';
                gallery.appendChild(img);
            });

            // Vídeos
            const videoList = document.getElementById('video-list');
            videoList.innerHTML = '';
            const videos = JSON.parse(localStorage.getItem('videos') || '[]');
            videos.forEach(v => {
                const p = document.createElement('p');
                p.textContent = v.title || 'Sermão';
                const iframe = document.createElement('iframe');
                iframe.src = v.url;
                iframe.width = '100%';
                iframe.height = '315';
                iframe.allowFullscreen = true;
                videoList.appendChild(p);
                videoList.appendChild(iframe);
            });
        }

        // Salvar Live
        document.getElementById('save-live').addEventListener('click', () => {
            const link = document.getElementById('live-link').value.trim();
            if (link) {
                localStorage.setItem('live-link', link);
                loadMedia();
                alert('Live salva com sucesso!');
                document.getElementById('live-link').value = '';
            } else {
                alert('Coloque o link embed da live!');
            }
        });

        // Adicionar Foto
        document.getElementById('add-foto').addEventListener('click', () => {
            const url = document.getElementById('foto-url').value.trim();
            if (url) {
                let fotos = JSON.parse(localStorage.getItem('fotos') || '[]');
                fotos.push(url);
                localStorage.setItem('fotos', JSON.stringify(fotos));
                loadMedia();
                alert('Foto adicionada com sucesso!');
                document.getElementById('foto-url').value = '';
            } else {
                alert('Coloque o link da imagem!');
            }
        });

        // Adicionar Vídeo
        document.getElementById('add-video').addEventListener('click', () => {
            const url = document.getElementById('video-url').value.trim();
            const title = document.getElementById('video-title').value.trim() || 'Sermão';
            if (url) {
                let videos = JSON.parse(localStorage.getItem('videos') || '[]');
                videos.push({url: url, title: title});
                localStorage.setItem('videos', JSON.stringify(videos));
                loadMedia();
                alert('Vídeo adicionado com sucesso!');
                document.getElementById('video-url').value = '';
                document.getElementById('video-title').value = '';
            } else {
                alert('Coloque o link embed do vídeo!');
            }
        });

        // Limpar tudo
        document.getElementById('remove-all').addEventListener('click', () => {
            if (confirm('Limpar tudo (live, fotos e vídeos)?')) {
                localStorage.removeItem('live-link');
                localStorage.removeItem('fotos');
                localStorage.removeItem('videos');
                loadMedia();
                alert('Tudo limpo!');
            }
        });

        // Carrega ao abrir
        loadMedia();
    </script>
</body>
</html>